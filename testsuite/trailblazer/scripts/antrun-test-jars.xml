<?xml version="1.0" encoding="UTF-8"?>

<!-- ============================================================ -->
<!--  JBoss, the OpenSource J2EE webOS                            -->
<!--  Distributable under LGPL license.                           -->
<!--  See terms of license at http://www.gnu.org.                 -->
<!-- ============================================================ -->

<!-- $Id: antrun-example-jars.xml 87329 2009-04-15 10:34:21Z thomas.diesler@jboss.com $ -->

<project default="build-test-jars">

  <description>OSGi test archive builder</description>

  <!-- ================================================================== -->
  <!-- Init                                                               -->
  <!-- ================================================================== -->

  <target name="init">

    <!-- Property override when not called from maven -->
    <property name="maven.runtime.classpath" value="/usr/java/bnd.jar" />
    <property name="tests.output.dir" value="${basedir}/../target" />

    <mkdir dir="${tests.output.dir}/test-libs" />
    <property name="tests.classes.dir" value="${tests.output.dir}/test-classes" />
    <property name="tests.resources.dir" value="${tests.output.dir}/test-classes" />

    <taskdef resource="aQute/bnd/ant/taskdef.properties">
      <classpath>
        <pathelement path="${maven.runtime.classpath}" />
      </classpath>
    </taskdef>

  </target>

  <!-- ================================================================== -->
  <!-- Building                                                           -->
  <!-- ================================================================== -->

  <target name="build-test-jars" depends="init" description="Build the test deployments">

    <!-- frontend -->
    <bnd classpath="${tests.classes.dir}" output="${tests.output.dir}/test-libs/trailblazer-frontend.jar" files="${tests.resources.dir}/trailblazer/frontend.bnd" />
    
    <!-- mall -->
    <bnd classpath="${tests.classes.dir}" output="${tests.output.dir}/test-libs/trailblazer-mall.jar" files="${tests.resources.dir}/trailblazer/mall.bnd" />
  	
    <!-- pay-creditcard -->
    <bnd classpath="${tests.classes.dir}" output="${tests.output.dir}/test-libs/trailblazer-pay-creditcard.jar" files="${tests.resources.dir}/trailblazer/pay-creditcard.bnd" />
  	
    <!-- pay-paypal -->
    <bnd classpath="${tests.classes.dir}" output="${tests.output.dir}/test-libs/trailblazer-pay-paypal.jar" files="${tests.resources.dir}/trailblazer/pay-paypal.bnd" />
  	
    <!-- shop-sports -->
    <bnd classpath="${tests.classes.dir}" output="${tests.output.dir}/test-libs/trailblazer-shop-sports.jar" files="${tests.resources.dir}/trailblazer/shop-sports.bnd" />
  	
    <!-- shop-pets -->
    <bnd classpath="${tests.classes.dir}" output="${tests.output.dir}/test-libs/trailblazer-shop-pets.jar" files="${tests.resources.dir}/trailblazer/shop-pets.bnd" />
  	
  </target>

</project>
