<?xml version="1.0" encoding="UTF-8"?>

<!-- ===================================================================== -->
<!--                                                                       -->
<!--  Logging System Configuration                                         -->
<!--                                                                       -->
<!-- ===================================================================== -->

<logging xmlns="urn:jboss:logging:6.0" xmlns:b="urn:jboss:bean-deployer:2.0">

   <!-- ================================= -->
   <!-- Preserve messages in a local file -->
   <!-- ================================= -->

   <!-- A time/date based rolling handler -->

   <periodic-rotating-file-handler
         file-name="${jboss.server.log.dir}/server.log"
         name="FILE"
         autoflush="true"
         append="false"
         suffix=".yyyy-MM-dd">  <!-- To roll over at the top of each hour, use ".yyyy-MM-dd-HH" instead -->

      <error-manager>
         <only-once/>
      </error-manager>

      <formatter>
         <!-- Uncomment this to get the class name in the log as well as the category
         <pattern-formatter pattern="%d %-5p [%c] %C{1} (%t) %m%n"/>
         -->
         <!-- Uncomment this to log without the class name in the log -->
         <pattern-formatter pattern="%d %-5p [%c] (%t) %m%n"/>
      </formatter>
   </periodic-rotating-file-handler>

   <!-- ============================== -->
   <!-- Append messages to the console -->
   <!-- ============================== -->

   <console-handler name="CONSOLE" autoflush="true" target="System.out">
      <error-manager>
         <only-once/>
      </error-manager>

      <level name="INFO"/>

      <formatter>
         <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] %m%n"/>
      </formatter>
   </console-handler>

   <!-- =============================================== -->
   <!-- Limit categories                                -->
   <!-- if enabling "trace" at root logger level,       -->
   <!-- use limit category settings to disable trace    -->
   <!-- for packages that you don't want to trace       -->
   <!-- =============================================== -->

   <!-- Limit the org.apache category to INFO as its DEBUG is verbose -->
   <logger category="org.jboss.osgi">
      <level name="TRACE"/>
   </logger>


   <!-- ======================= -->
   <!-- Setup the Root category -->
   <!-- ======================= -->

   <root-logger>
      <!-- Set the root logger priority via a system property, with a default value. -->
      <level name="${jboss.server.log.threshold:INFO}"/>
      <handlers>
         <handler-ref name="CONSOLE"/>
         <handler-ref name="FILE"/>
      </handlers>
   </root-logger>

</logging>
